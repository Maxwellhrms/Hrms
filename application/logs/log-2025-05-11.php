<?php defined('BASEPATH') OR exit('No direct script access allowed'); ?>

ERROR - 2025-05-11 14:53:15 --> Query error: Unknown column 'mxemp_emp_comp_code' in 'field list' - Invalid query: SELECT `mxemp_emp_lg_employee_id`, `mxemp_emp_lg_fullname`, `mxemp_emp_lg_password`, `mxemp_emp_lg_role`, `mxemp_emp_lg_desktop_permissions`, `mxemp_emp_lg_id`, `mxemp_emp_google_map`, `mxemp_emp_inbranch`, `mxemp_emp_comp_code`, `mxemp_emp_division_code`, `mxemp_emp_branch_code`, `mxemp_emp_dept_code`, `mxemp_emp_grade_code`, `mxemp_emp_desg_code`, `mxemp_emp_state_code`, `mxemp_emp_custom_branch`
FROM `maxwell_employees_login`
WHERE `mxemp_emp_lg_employee_id` = '888666'
ERROR - 2025-05-11 14:53:57 --> Query error: Unknown column 'mxemp_emp_comp_code' in 'field list' - Invalid query: SELECT `mxemp_emp_lg_employee_id`, `mxemp_emp_lg_fullname`, `mxemp_emp_lg_password`, `mxemp_emp_lg_role`, `mxemp_emp_lg_desktop_permissions`, `mxemp_emp_lg_id`, `mxemp_emp_google_map`, `mxemp_emp_inbranch`, `mxemp_emp_comp_code`, `mxemp_emp_division_code`, `mxemp_emp_branch_code`, `mxemp_emp_dept_code`, `mxemp_emp_grade_code`, `mxemp_emp_desg_code`, `mxemp_emp_state_code`, `mxemp_emp_custom_branch`
FROM `maxwell_employees_login`
WHERE `mxemp_emp_lg_employee_id` = '888666'
ERROR - 2025-05-11 14:54:01 --> Query error: Unknown column 'mxemp_emp_comp_code' in 'field list' - Invalid query: SELECT `mxemp_emp_lg_employee_id`, `mxemp_emp_lg_fullname`, `mxemp_emp_lg_password`, `mxemp_emp_lg_role`, `mxemp_emp_lg_desktop_permissions`, `mxemp_emp_lg_id`, `mxemp_emp_google_map`, `mxemp_emp_inbranch`, `mxemp_emp_comp_code`, `mxemp_emp_division_code`, `mxemp_emp_branch_code`, `mxemp_emp_dept_code`, `mxemp_emp_grade_code`, `mxemp_emp_desg_code`, `mxemp_emp_state_code`, `mxemp_emp_custom_branch`
FROM `maxwell_employees_login`
WHERE `mxemp_emp_lg_employee_id` = '888666'
ERROR - 2025-05-11 14:59:26 --> Query error: Unknown column 'mxemp_emp_comp_code' in 'field list' - Invalid query: SELECT `mxemp_emp_lg_employee_id`, `mxemp_emp_lg_fullname`, `mxemp_emp_lg_password`, `mxemp_emp_lg_role`, `mxemp_emp_lg_desktop_permissions`, `mxemp_emp_lg_id`, `mxemp_emp_google_map`, `mxemp_emp_inbranch`, `mxemp_emp_comp_code`, `mxemp_emp_division_code`, `mxemp_emp_branch_code`, `mxemp_emp_dept_code`, `mxemp_emp_grade_code`, `mxemp_emp_desg_code`, `mxemp_emp_state_code`, `mxemp_emp_custom_branch`
FROM `maxwell_employees_login`
WHERE `mxemp_emp_lg_employee_id` = '888666'
ERROR - 2025-05-11 14:59:28 --> Query error: Unknown column 'mxemp_emp_comp_code' in 'field list' - Invalid query: SELECT `mxemp_emp_lg_employee_id`, `mxemp_emp_lg_fullname`, `mxemp_emp_lg_password`, `mxemp_emp_lg_role`, `mxemp_emp_lg_desktop_permissions`, `mxemp_emp_lg_id`, `mxemp_emp_google_map`, `mxemp_emp_inbranch`, `mxemp_emp_comp_code`, `mxemp_emp_division_code`, `mxemp_emp_branch_code`, `mxemp_emp_dept_code`, `mxemp_emp_grade_code`, `mxemp_emp_desg_code`, `mxemp_emp_state_code`, `mxemp_emp_custom_branch`
FROM `maxwell_employees_login`
WHERE `mxemp_emp_lg_employee_id` = '888666'
ERROR - 2025-05-11 14:59:28 --> Query error: Unknown column 'mxemp_emp_comp_code' in 'field list' - Invalid query: SELECT `mxemp_emp_lg_employee_id`, `mxemp_emp_lg_fullname`, `mxemp_emp_lg_password`, `mxemp_emp_lg_role`, `mxemp_emp_lg_desktop_permissions`, `mxemp_emp_lg_id`, `mxemp_emp_google_map`, `mxemp_emp_inbranch`, `mxemp_emp_comp_code`, `mxemp_emp_division_code`, `mxemp_emp_branch_code`, `mxemp_emp_dept_code`, `mxemp_emp_grade_code`, `mxemp_emp_desg_code`, `mxemp_emp_state_code`, `mxemp_emp_custom_branch`
FROM `maxwell_employees_login`
WHERE `mxemp_emp_lg_employee_id` = '888666'
ERROR - 2025-05-11 14:59:28 --> Query error: Unknown column 'mxemp_emp_comp_code' in 'field list' - Invalid query: SELECT `mxemp_emp_lg_employee_id`, `mxemp_emp_lg_fullname`, `mxemp_emp_lg_password`, `mxemp_emp_lg_role`, `mxemp_emp_lg_desktop_permissions`, `mxemp_emp_lg_id`, `mxemp_emp_google_map`, `mxemp_emp_inbranch`, `mxemp_emp_comp_code`, `mxemp_emp_division_code`, `mxemp_emp_branch_code`, `mxemp_emp_dept_code`, `mxemp_emp_grade_code`, `mxemp_emp_desg_code`, `mxemp_emp_state_code`, `mxemp_emp_custom_branch`
FROM `maxwell_employees_login`
WHERE `mxemp_emp_lg_employee_id` = '888666'
ERROR - 2025-05-11 16:33:04 --> Query error: Table 'maxwellhrms_hr.maxwell_attendance_2026_01' doesn't exist - Invalid query:  select @serial_number:=@serial_number+1 as serial_number,mxemp_emp_esi_number as esi_no,concat(mxemp_emp_fname,' ',mxemp_emp_lname) as name,mxsal_total_days_from_attendance as no_of_days,mxsal_actual_gross as gross_wages,'' as reason,date_format(mxemp_emp_resignation_relieving_date, '%d/%m/%Y') as relieve_date from mxsal_m inner join maxwell_employees_info on mxemp_emp_comp_code = mxsal_cmp_id and mxemp_emp_type = mxsal_emp_type and mxemp_emp_id = mxsal_emp_code inner join maxwell_company_master on mxcp_id = mxemp_emp_comp_code inner join maxwell_designation_master on mxdesg_id = mxemp_emp_desg_code inner join maxwell_department_master on mxdpt_id = mxemp_emp_dept_code inner join maxwell_division_master on mxd_id = mxemp_emp_division_code inner join maxwell_branch_master on mxb_id = mxemp_emp_branch_code inner join maxwell_grade_master on mxgrd_id = mxemp_emp_grade_code inner join maxwell_state_master on mxst_id = mxemp_emp_state_code left join maxwell_esi_reasons on mxesi_rsn_id = mxemp_emp_esi_reason inner join (SELECT
                    (
                    select max(case when mxemp_leave_bal_leave_type_shrt_name = 'CL' then mxemp_leave_bal_crnt_bal end) from maxwell_emp_leave_balance where mx_attendance_emp_code = mxemp_leave_bal_emp_id
                    group by mxemp_leave_bal_emp_id) as CurrentCL,
                (select max(case when mxemp_leave_bal_leave_type_shrt_name = 'SL' then mxemp_leave_bal_crnt_bal end) from maxwell_emp_leave_balance where mx_attendance_emp_code = mxemp_leave_bal_emp_id
                    group by mxemp_leave_bal_emp_id) as CurrentSL,
                    (select max(case when mxemp_leave_bal_leave_type_shrt_name = 'EL' then mxemp_leave_bal_crnt_bal end) from maxwell_emp_leave_balance where mx_attendance_emp_code = mxemp_leave_bal_emp_id
                    group by mxemp_leave_bal_emp_id) as CurrentEL,
                    -- NEW BY SHABABU(12-06-2022)-->  ML
                    (select max(case when mxemp_leave_bal_leave_type_shrt_name = 'ML' then mxemp_leave_bal_crnt_bal ELSE 0 end) from maxwell_emp_leave_balance where mx_attendance_emp_code = mxemp_leave_bal_emp_id
                    group by mxemp_leave_bal_emp_id) as CurrentML,
                    CONCAT(mxemp_emp_fname , ' ' , mxemp_emp_lname) as EmployeeName,mx_attendance_emp_code as EmployeeID,
                    count(*) AS Totaldays,
                    sum(case when mx_attendance_first_half = 'WO' AND mx_attendance_second_half = 'WO' then 1 else 0 end) AS Week_Off,
                    sum(case when mx_attendance_first_half = 'PH' AND mx_attendance_second_half = 'PH' then 1 else 0 end) AS Public_Holiday,
                    sum(case when mx_attendance_first_half = 'PH' AND mx_attendance_second_half != 'PH' then 0.5 else 0 end) AS First_Half_Public_Holiday,
                    sum(case when mx_attendance_first_half != 'PH' AND mx_attendance_second_half = 'PH' then 0.5 else 0 end) AS Second_Half_Public_Holiday,
                    sum(case when mx_attendance_first_half = 'OPH' AND mx_attendance_second_half = 'OPH' then 1 else 0 end) AS Optional_Holiday,
                    sum(case when mx_attendance_first_half = 'OPH' AND mx_attendance_second_half != 'OPH' then 0.5 else 0 end) AS First_Half_Optional_Holiday,
                    sum(case when mx_attendance_first_half != 'OPH' AND mx_attendance_second_half = 'OPH' then 0.5 else 0 end) AS Second_Half_Optional_Holiday,
                    -- Absent History
                    sum(case when mx_attendance_first_half = 'AB' AND mx_attendance_second_half = 'AB' then 1 else 0 end) AS Absent,
                    sum(case when mx_attendance_first_half = 'AB' AND mx_attendance_second_half != 'AB' then 0.5 else 0 end) AS First_Half_Absent,
                    sum(case when mx_attendance_second_half = 'AB' AND mx_attendance_first_half != 'AB' then 0.5 else 0 end) AS Second_Half_Absent,
                    -- End Absent History
                    -- Present History
                    sum(case when mx_attendance_first_half = 'PR' AND mx_attendance_second_half = 'PR' then 1 else 0 end) AS Present,
                    sum(case when mx_attendance_first_half = 'PR' AND mx_attendance_second_half = 'AB' then 0.5 else 0 end) AS First_Half_Present,
                    sum(case when mx_attendance_first_half = 'AB' AND mx_attendance_second_half = 'PR' then 0.5 else 0 end) AS Second_Half_Present,
                    sum(case when mx_attendance_first_half = 'PR' AND mx_attendance_second_half = 'CL' then 0.5 else 0 end) AS First_Half_Present_Cl_Applied,
                    sum(case when mx_attendance_first_half = 'CL' AND mx_attendance_second_half = 'PR' then 0.5 else 0 end) AS Second_Half_Present_Cl_Applied,
                    sum(case when mx_attendance_first_half = 'PR' AND mx_attendance_second_half = 'SL' then 0.5 else 0 end) AS First_Half_Present_Sl_Applied,
                    sum(case when mx_attendance_first_half = 'SL' AND mx_attendance_second_half = 'PR' then 0.5 else 0 end) AS Second_Half_Present_Sl_Applied,
                    sum(case when mx_attendance_first_half = 'PR' AND mx_attendance_second_half = 'EL' then 0.5 else 0 end) AS First_Half_Present_El_Applied,
                    sum(case when mx_attendance_first_half = 'EL' AND mx_attendance_second_half = 'PR' then 0.5 else 0 end) AS Second_Half_Present_El_Applied,
                    -- End Present History
                    -- Casualleave History
                    sum(case when mx_attendance_first_half = 'CL' AND mx_attendance_second_half = 'CL' then 1 else 0 end) AS Casualleave,
                    sum(case when mx_attendance_first_half = 'CL' AND mx_attendance_second_half != 'CL' then 0.5 else 0 end) AS First_Half_Casualleave,
                    sum(case when mx_attendance_first_half != 'CL' AND mx_attendance_second_half = 'CL' then 0.5 else 0 end) AS Second_Half_Casualleave,
                    -- End Casualleave History
                    -- Sickleave History
                    sum(case when mx_attendance_first_half = 'SL' AND mx_attendance_second_half = 'SL' then 1 else 0 end) AS Sickleave,
                    sum(case when mx_attendance_first_half = 'SL' AND mx_attendance_second_half != 'SL' then 0.5 else 0 end) AS First_Half_Sickleave,
                    sum(case when mx_attendance_first_half != 'SL' AND mx_attendance_second_half = 'SL' then 0.5 else 0 end) AS Second_Half_Sickleave,
                    -- End Sickleave History
                    -- Earnedleave History
                    sum(case when mx_attendance_first_half = 'EL' AND mx_attendance_second_half = 'EL' then 1 else 0 end) AS Earnedleave,
                    sum(case when mx_attendance_first_half = 'EL' AND mx_attendance_second_half != 'EL' then 0.5 else 0 end) AS First_Half_Earnedleave,
                    sum(case when mx_attendance_first_half != 'EL' AND mx_attendance_second_half = 'EL' then 0.5 else 0 end) AS Second_Half_Earnedleave,
                    -- End Earnedleave History
                    -- Meternityleave History
                    sum(case when mx_attendance_first_half = 'ML' AND mx_attendance_second_half = 'ML' then 1 else 0 end) AS Meternityleave,
                    sum(case when mx_attendance_first_half = 'ML' AND mx_attendance_second_half != 'ML' then 0.5 else 0 end) AS First_Half_Meternityleave,
                    sum(case when mx_attendance_first_half != 'ML' AND mx_attendance_second_half = 'ML' then 0.5 else 0 end) AS Second_Half_Meternityleave
                    -- End Meternityleave History
                FROM maxwell_attendance_2026_01
                INNER JOIN maxwell_employees_info on mxemp_emp_id = mx_attendance_emp_code
                    
                GROUP BY EmployeeID) as attendance on  EmployeeID = mxsal_emp_code where mxsal_status=1 and mxsal_year_month=202601 and mxsal_cmp_id = 1
ERROR - 2025-05-11 16:33:55 --> Query error: Table 'maxwellhrms_hr.maxwell_attendance_2026_01' doesn't exist - Invalid query:  select @serial_number:=@serial_number+1 as serial_number,mxemp_emp_esi_number as esi_no,concat(mxemp_emp_fname,' ',mxemp_emp_lname) as name,mxsal_total_days_from_attendance as no_of_days,mxsal_actual_gross as gross_wages,'' as reason,date_format(mxemp_emp_resignation_relieving_date, '%d/%m/%Y') as relieve_date from mxsal_m inner join maxwell_employees_info on mxemp_emp_comp_code = mxsal_cmp_id and mxemp_emp_type = mxsal_emp_type and mxemp_emp_id = mxsal_emp_code inner join maxwell_company_master on mxcp_id = mxemp_emp_comp_code inner join maxwell_designation_master on mxdesg_id = mxemp_emp_desg_code inner join maxwell_department_master on mxdpt_id = mxemp_emp_dept_code inner join maxwell_division_master on mxd_id = mxemp_emp_division_code inner join maxwell_branch_master on mxb_id = mxemp_emp_branch_code inner join maxwell_grade_master on mxgrd_id = mxemp_emp_grade_code inner join maxwell_state_master on mxst_id = mxemp_emp_state_code left join maxwell_esi_reasons on mxesi_rsn_id = mxemp_emp_esi_reason inner join (SELECT
                    (
                    select max(case when mxemp_leave_bal_leave_type_shrt_name = 'CL' then mxemp_leave_bal_crnt_bal end) from maxwell_emp_leave_balance where mx_attendance_emp_code = mxemp_leave_bal_emp_id
                    group by mxemp_leave_bal_emp_id) as CurrentCL,
                (select max(case when mxemp_leave_bal_leave_type_shrt_name = 'SL' then mxemp_leave_bal_crnt_bal end) from maxwell_emp_leave_balance where mx_attendance_emp_code = mxemp_leave_bal_emp_id
                    group by mxemp_leave_bal_emp_id) as CurrentSL,
                    (select max(case when mxemp_leave_bal_leave_type_shrt_name = 'EL' then mxemp_leave_bal_crnt_bal end) from maxwell_emp_leave_balance where mx_attendance_emp_code = mxemp_leave_bal_emp_id
                    group by mxemp_leave_bal_emp_id) as CurrentEL,
                    -- NEW BY SHABABU(12-06-2022)-->  ML
                    (select max(case when mxemp_leave_bal_leave_type_shrt_name = 'ML' then mxemp_leave_bal_crnt_bal ELSE 0 end) from maxwell_emp_leave_balance where mx_attendance_emp_code = mxemp_leave_bal_emp_id
                    group by mxemp_leave_bal_emp_id) as CurrentML,
                    CONCAT(mxemp_emp_fname , ' ' , mxemp_emp_lname) as EmployeeName,mx_attendance_emp_code as EmployeeID,
                    count(*) AS Totaldays,
                    sum(case when mx_attendance_first_half = 'WO' AND mx_attendance_second_half = 'WO' then 1 else 0 end) AS Week_Off,
                    sum(case when mx_attendance_first_half = 'PH' AND mx_attendance_second_half = 'PH' then 1 else 0 end) AS Public_Holiday,
                    sum(case when mx_attendance_first_half = 'PH' AND mx_attendance_second_half != 'PH' then 0.5 else 0 end) AS First_Half_Public_Holiday,
                    sum(case when mx_attendance_first_half != 'PH' AND mx_attendance_second_half = 'PH' then 0.5 else 0 end) AS Second_Half_Public_Holiday,
                    sum(case when mx_attendance_first_half = 'OPH' AND mx_attendance_second_half = 'OPH' then 1 else 0 end) AS Optional_Holiday,
                    sum(case when mx_attendance_first_half = 'OPH' AND mx_attendance_second_half != 'OPH' then 0.5 else 0 end) AS First_Half_Optional_Holiday,
                    sum(case when mx_attendance_first_half != 'OPH' AND mx_attendance_second_half = 'OPH' then 0.5 else 0 end) AS Second_Half_Optional_Holiday,
                    -- Absent History
                    sum(case when mx_attendance_first_half = 'AB' AND mx_attendance_second_half = 'AB' then 1 else 0 end) AS Absent,
                    sum(case when mx_attendance_first_half = 'AB' AND mx_attendance_second_half != 'AB' then 0.5 else 0 end) AS First_Half_Absent,
                    sum(case when mx_attendance_second_half = 'AB' AND mx_attendance_first_half != 'AB' then 0.5 else 0 end) AS Second_Half_Absent,
                    -- End Absent History
                    -- Present History
                    sum(case when mx_attendance_first_half = 'PR' AND mx_attendance_second_half = 'PR' then 1 else 0 end) AS Present,
                    sum(case when mx_attendance_first_half = 'PR' AND mx_attendance_second_half = 'AB' then 0.5 else 0 end) AS First_Half_Present,
                    sum(case when mx_attendance_first_half = 'AB' AND mx_attendance_second_half = 'PR' then 0.5 else 0 end) AS Second_Half_Present,
                    sum(case when mx_attendance_first_half = 'PR' AND mx_attendance_second_half = 'CL' then 0.5 else 0 end) AS First_Half_Present_Cl_Applied,
                    sum(case when mx_attendance_first_half = 'CL' AND mx_attendance_second_half = 'PR' then 0.5 else 0 end) AS Second_Half_Present_Cl_Applied,
                    sum(case when mx_attendance_first_half = 'PR' AND mx_attendance_second_half = 'SL' then 0.5 else 0 end) AS First_Half_Present_Sl_Applied,
                    sum(case when mx_attendance_first_half = 'SL' AND mx_attendance_second_half = 'PR' then 0.5 else 0 end) AS Second_Half_Present_Sl_Applied,
                    sum(case when mx_attendance_first_half = 'PR' AND mx_attendance_second_half = 'EL' then 0.5 else 0 end) AS First_Half_Present_El_Applied,
                    sum(case when mx_attendance_first_half = 'EL' AND mx_attendance_second_half = 'PR' then 0.5 else 0 end) AS Second_Half_Present_El_Applied,
                    -- End Present History
                    -- Casualleave History
                    sum(case when mx_attendance_first_half = 'CL' AND mx_attendance_second_half = 'CL' then 1 else 0 end) AS Casualleave,
                    sum(case when mx_attendance_first_half = 'CL' AND mx_attendance_second_half != 'CL' then 0.5 else 0 end) AS First_Half_Casualleave,
                    sum(case when mx_attendance_first_half != 'CL' AND mx_attendance_second_half = 'CL' then 0.5 else 0 end) AS Second_Half_Casualleave,
                    -- End Casualleave History
                    -- Sickleave History
                    sum(case when mx_attendance_first_half = 'SL' AND mx_attendance_second_half = 'SL' then 1 else 0 end) AS Sickleave,
                    sum(case when mx_attendance_first_half = 'SL' AND mx_attendance_second_half != 'SL' then 0.5 else 0 end) AS First_Half_Sickleave,
                    sum(case when mx_attendance_first_half != 'SL' AND mx_attendance_second_half = 'SL' then 0.5 else 0 end) AS Second_Half_Sickleave,
                    -- End Sickleave History
                    -- Earnedleave History
                    sum(case when mx_attendance_first_half = 'EL' AND mx_attendance_second_half = 'EL' then 1 else 0 end) AS Earnedleave,
                    sum(case when mx_attendance_first_half = 'EL' AND mx_attendance_second_half != 'EL' then 0.5 else 0 end) AS First_Half_Earnedleave,
                    sum(case when mx_attendance_first_half != 'EL' AND mx_attendance_second_half = 'EL' then 0.5 else 0 end) AS Second_Half_Earnedleave,
                    -- End Earnedleave History
                    -- Meternityleave History
                    sum(case when mx_attendance_first_half = 'ML' AND mx_attendance_second_half = 'ML' then 1 else 0 end) AS Meternityleave,
                    sum(case when mx_attendance_first_half = 'ML' AND mx_attendance_second_half != 'ML' then 0.5 else 0 end) AS First_Half_Meternityleave,
                    sum(case when mx_attendance_first_half != 'ML' AND mx_attendance_second_half = 'ML' then 0.5 else 0 end) AS Second_Half_Meternityleave
                    -- End Meternityleave History
                FROM maxwell_attendance_2026_01
                INNER JOIN maxwell_employees_info on mxemp_emp_id = mx_attendance_emp_code
                    
                GROUP BY EmployeeID) as attendance on  EmployeeID = mxsal_emp_code where mxsal_status=1 and mxsal_year_month=202601 and mxsal_cmp_id = 1
